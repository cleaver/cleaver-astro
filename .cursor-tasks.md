# cleaver.ca Rebuild with Astro.js - Development Tasks

This document breaks down the requirements for rebuilding cleaver.ca with Astro.js into discrete, actionable tasks organized by topic area. Each task is designed to be specific enough for implementation without requiring additional context.

## 1. Project Setup and Configuration

### 1.1 Initial Project Setup

- [x] 1.1.1 Initialize a new Astro.js project using the latest stable version (v5.0+)
- [x] 1.1.2 Set up the project directory structure following Astro.js conventions
- [x] 1.1.3 Configure Git repository with appropriate .gitignore file
- [x] 1.1.4 Create README.md with project overview and setup instructions


### 1.2 Dependencies Installation

- [x] 1.2.1 Install core dependencies: astro, @astrojs/tailwind, tailwindcss
- [x] 1.2.2 Install typography plugin: @tailwindcss/typography
- [x] 1.2.3 Install SEO-related packages: @astrojs/sitemap, @astrojs/rss
- [ ] 1.2.4 Add RSS content
<IMPORTANT_NOTES>
Populate the `items` of the `rss` object in `rss.xml.ts`.

Possibly something like this:

```typescript
import rss from '@astrojs/rss';
import { getCollection } from 'astro:content';

export async function GET(context) {
  const blog = await getCollection('blog');
  return rss({
    title: 'Buzz’s Blog',
    description: 'A humble Astronaut’s guide to the stars',
    site: context.site,
    items: blog.map((post) => ({
      title: post.data.title,
      pubDate: post.data.pubDate,
      description: post.data.description,
      // Compute RSS link from post `id`
      // This example assumes all posts are rendered as `/blog/[id]` routes
      link: `/blog/${post.id}/`,
    })),
  });
}
```
</IMPORTANT_NOTES>
- [x] 1.2.5 Install Markdown enhancement packages: rehype-slug, rehype-autolink-headings, shiki
- [x] 1.2.6 Install development dependencies: prettier, prettier-plugin-tailwindcss, eslint


### 1.3 Configuration Files

- [x] 1.3.1 Create astro.config.mjs with output, build settings, and integrations
- [ ] 1.3.2 Configure tailwind.config.js with content paths, dark mode, and custom theme
<IMPORTANT_NOTES>
For Tailwind 4 configuration:
- Create tailwind.config.js in project root:
  ```js
  /** @type {import('tailwindcss').Config} */
  export default {
    content: [
      './src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}',
    ],
    darkMode: 'class', // or 'media' for system preference
    theme: {
      extend: {
        colors: {
          primary: {
            50: '#f8fafc',
            // ... other shades
            900: '#0f172a',
          },
        },
        typography: {
          DEFAULT: {
            css: {
              maxWidth: '65ch',
              color: 'inherit',
              a: {
                color: 'inherit',
                '&:hover': {
                  color: 'var(--tw-prose-links)',
                },
              },
            },
          },
        },
      },
    },
    plugins: [
      // Plugins configured in previous tasks
    ],
  }
  ```
- Key configurations:
  - content: Paths for purging unused styles
  - darkMode: Strategy for dark mode implementation
  - theme.extend: Custom design tokens
  - plugins: Array of installed plugins
- Supports JIT (Just-In-Time) mode by default
- Use CSS variables for dynamic values
- Configure breakpoints for responsive design
</IMPORTANT_NOTES>
- [ ] 1.3.3 Set up tsconfig.json for TypeScript support
<IMPORTANT_NOTES>
For TypeScript configuration in Astro 5.2+:
- Create tsconfig.json in project root:
  ```json
  {
    "extends": "astro/tsconfigs/strict",
    "compilerOptions": {
      "baseUrl": ".",
      "paths": {
        "@/*": ["src/*"],
        "@components/*": ["src/components/*"],
        "@layouts/*": ["src/layouts/*"],
        "@assets/*": ["src/assets/*"]
      },
      "jsx": "react-jsx",
      "jsxImportSource": "react",
      "verbatimModuleSyntax": true,
      "moduleResolution": "bundler",
      "module": "ESNext",
      "target": "ESNext",
      "strict": true
    },
    "include": [
      "src/**/*",
      "astro.config.*"
    ],
    "exclude": [
      "node_modules",
      "dist"
    ]
  }
  ```
- Key features:
  - Extends Astro's strict config
  - Path aliases for cleaner imports
  - JSX support for React components
  - Modern module resolution
  - Strict type checking
- Supports both .ts and .tsx files
- Enables IDE features like auto-completion
- Works with VS Code out of the box
</IMPORTANT_NOTES>
- [ ] 1.3.4 Create .prettierrc and .eslintrc for code formatting and linting
<IMPORTANT_NOTES>
Configuration already covered in task 1.2.5. Key points:
- .prettierrc:
  - Configured for Astro and Tailwind
  - Consistent code style
  - Auto-formatting on save
- .eslintrc:
  - TypeScript-aware linting
  - Astro-specific rules
  - Integration with VS Code
Refer to task 1.2.5 for detailed configuration.
</IMPORTANT_NOTES>
- [ ] 1.3.5 Configure package.json with appropriate scripts (dev, build, preview, lint, format)
<IMPORTANT_NOTES>
For package.json scripts in Astro 5.2+:
```json
{
  "name": "cleaver-astro",
  "type": "module",
  "version": "0.0.1",
  "scripts": {
    "dev": "astro dev",
    "start": "astro dev",
    "build": "astro check && astro build",
    "preview": "astro preview",
    "astro": "astro",
    "lint": "eslint \"src/**/*.{js,ts,jsx,tsx,astro}\"",
    "lint:fix": "eslint --fix \"src/**/*.{js,ts,jsx,tsx,astro}\"",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "typecheck": "astro check && tsc --noEmit",
    "clean": "rm -rf dist .astro node_modules"
  },
  "dependencies": {
    // Dependencies from previous tasks
  },
  "devDependencies": {
    // Dev dependencies from previous tasks
  },
  "engines": {
    "node": ">=22.0.0"
  }
}
```
- Key scripts:
  - dev/start: Local development server
  - build: Production build with type checking
  - preview: Preview production build
  - lint/format: Code quality tools
  - typecheck: TypeScript validation
  - clean: Project cleanup
- Ensures consistent commands across team
- Supports npm, yarn, or pnpm
- Includes type checking in build process
</IMPORTANT_NOTES>


## 2. Content Structure and Migration

### 2.1 Content Directory Setup

- [ ] 2.1.1 Create content collection structure in content/blog/
<IMPORTANT_NOTES>
For Astro 5.2+ content collections:
- Create directory structure:
  ```
  src/
  ├── content/
  │   ├── blog/
  │   │   ├── _schema.ts    # Collection schema definition
  │   │   └── posts/        # Blog post entries
  │   └── config.ts         # Content collections config
  ```
- In config.ts:
  ```typescript
  import { defineCollection, z } from 'astro:content';

  const blog = defineCollection({
    type: 'content',
    schema: z.object({
      title: z.string(),
      description: z.string(),
      pubDate: z.date(),
      updatedDate: z.date().optional(),
      heroImage: z.string().optional(),
      tags: z.array(z.string()).default([]),
      draft: z.boolean().default(false)
    })
  });

  export const collections = { blog };
  ```
- Enable TypeScript validation in tsconfig.json:
  ```json
  {
    "extends": "astro/tsconfigs/strict",
    "compilerOptions": {
      "strictNullChecks": true,
      "allowJs": true
    }
  }
  ```
- Collection benefits:
  - Type-safe content validation
  - Automatic TypeScript types
  - Built-in content querying API
  - Scalable to thousands of entries
  - Compatible with both .md and .mdx files
</IMPORTANT_NOTES>
- [ ] 2.1.2 Set up year/month directory organization (e.g., content/blog/2023/01/)
<IMPORTANT_NOTES>
For blog post organization in Astro 5.2+:
- Directory structure:
  ```
  src/content/blog/posts/
  ├── 2024/
  │   ├── 01/
  │   │   ├── first-post.md
  │   │   └── second-post.md
  │   └── 02/
  │       └── latest-post.md
  ├── 2023/
  │   ├── 12/
  │   └── 11/
  └── index.ts  # Optional: export utilities
  ```
- Naming convention:
  - Files: YYYY-MM-DD-slug.md
  - Example: 2024-01-15-first-post.md
- Benefits:
  - Easy chronological organization
  - Simple date-based filtering
  - Clear content versioning
  - Scalable folder structure
- Access via collection API:
  ```typescript
  const posts = await getCollection('blog', ({ data }) => {
    return data.pubDate.getFullYear() === 2024;
  });
  ```
</IMPORTANT_NOTES>
- [ ] 2.1.3 Create content/about/ directory for the About page content
<IMPORTANT_NOTES>
For About page content in Astro 5.2+:
- Directory structure:
  ```
  src/content/
  ├── about/
  │   ├── _schema.ts
  │   ├── index.md      # Main about content
  │   ├── team.md       # Optional: team info
  │   └── history.md    # Optional: site history
  └── config.ts         # Add about collection
  ```
- Schema example:
  ```typescript
  const about = defineCollection({
    type: 'content',
    schema: z.object({
      title: z.string(),
      lastUpdated: z.date(),
      sections: z.array(z.string()),
      showInNav: z.boolean().default(true)
    })
  });
  ```
- Benefits:
  - Separate content from presentation
  - Easy content updates
  - Type-safe metadata
  - Reusable across different pages
</IMPORTANT_NOTES>
- [ ] 2.1.4 Set up public/images/ directory with year/month structure
<IMPORTANT_NOTES>
For image organization in Astro 5.2+:
- Directory structure:
  ```
  public/
  └── images/
      ├── 2024/
      │   ├── 01/
      │   │   ├── hero-images/
      │   │   └── content-images/
      │   └── 02/
      └── global/
          ├── logos/
          ├── icons/
          └── backgrounds/
  ```
- Best practices:
  - Use descriptive filenames: YYYY-MM-DD-purpose-name.webp
  - Organize by usage: hero-images/, content-images/
  - Keep global assets separate
  - Use WebP format for optimal performance
- Image optimization:
  ```typescript
  import { getImage } from 'astro:assets';
  const optimizedImage = await getImage({
    src: '/images/2024/01/hero-images/blog-post.webp',
    width: 800,
    format: 'webp'
  });
  ```
- Benefits:
  - Organized asset management
  - Easy version tracking
  - Efficient caching
  - Built-in optimization support
</IMPORTANT_NOTES>


### 2.2 Content Migration

- [ ] 2.2.1 Export existing blog posts to Markdown format
<IMPORTANT_NOTES>
For migrating content from old-content/:
- Source directory structure:
  ```
  old-content/
  └── blog/
      └── comment-spam-drupal/
          ├── index.md
          └── spam.jpg
  ```
- Migration script requirements:
  ```typescript
  // src/scripts/migrate-content.ts
  import { readdir, readFile, writeFile } from 'fs/promises';
  import { join } from 'path';
  import matter from 'gray-matter';
  import { format } from 'date-fns';

  // Process each article directory
  // Move images to new structure
  // Update image references in content
  ```
- Handle special cases:
  - Preserve original publication dates
  - Maintain image relationships
  - Keep URL slugs for SEO
  - Process any HTML in Markdown
</IMPORTANT_NOTES>
- [ ] 2.2.2 Standardize frontmatter format for all blog posts
<IMPORTANT_NOTES>
For standardizing frontmatter in Astro 5.2+:
- Current format:
  ```yaml
  title: Comment Spam on Drupal
  description: Dealing with all the junk.
  date: 2014-06-27
  tags:
    - Drupal
    - spam
    - security
  author: Cleaver Barnes
  hero_image: "./spam.jpg"
  hero_caption: "Bench tagged with \"spam\""
  ```
- New format (collection schema):
  ```yaml
  ---
  title: Comment Spam on Drupal
  description: Dealing with all the junk.
  pubDate: 2014-06-27
  updatedDate: 2024-01-15  # Optional
  author: Cleaver Barnes
  heroImage: /images/2014/06/hero-images/spam.webp
  heroCaption: Bench tagged with "spam"
  tags: 
    - Drupal
    - spam
    - security
  draft: false
  ---
  ```
- Key changes:
  - Rename date → pubDate (Astro convention)
  - Add updatedDate if content is revised
  - Update image paths to new structure
  - Convert hero_image/hero_caption to camelCase
  - Add draft status field
</IMPORTANT_NOTES>
- [ ] 2.2.3 Verify all required metadata fields are present (title, date, description, pubDate)
<IMPORTANT_NOTES>
For metadata validation in Astro 5.2+:
- Required fields (from schema):
  ```typescript
  const blogSchema = z.object({
    title: z.string(),
    description: z.string(),
    pubDate: z.date(),
    author: z.string(),
    // Optional fields
    updatedDate: z.date().optional(),
    heroImage: z.string().optional(),
    heroCaption: z.string().optional(),
    tags: z.array(z.string()).default([]),
    draft: z.boolean().default(false)
  });
  ```
- Validation script:
  ```typescript
  // src/scripts/validate-content.ts
  import { getCollection } from 'astro:content';

  const posts = await getCollection('blog');
  const issues = posts.map(post => ({
    slug: post.slug,
    missingFields: findMissingFields(post.data),
    warnings: findWarnings(post.data)
  })).filter(result => result.missingFields.length > 0);
  ```
- Common issues to check:
  - Missing descriptions
  - Invalid dates
  - Broken image references
  - Duplicate slugs
  - Missing alt text
</IMPORTANT_NOTES>
- [ ] 2.2.4 Convert About page content to Markdown format
<IMPORTANT_NOTES>
For About page migration:
- Create about collection schema:
  ```typescript
  const about = defineCollection({
    type: 'content',
    schema: z.object({
      title: z.string(),
      description: z.string(),
      lastUpdated: z.date(),
      sections: z.array(z.string()),
      showInNav: z.boolean().default(true)
    })
  });
  ```
- File structure:
  ```
  src/content/about/
  ├── _schema.ts
  ├── index.md       # Main about content
  ├── team.md        # Optional
  └── history.md     # Optional
  ```
- Frontmatter format:
  ```yaml
  ---
  title: About Cleaver Barnes
  description: Software developer and technical architect
  lastUpdated: 2024-01-15
  sections: 
    - Introduction
    - Background
    - Skills
  showInNav: true
  ---
  ```
- Content guidelines:
  - Use semantic headings (h2, h3)
  - Include professional info
  - Add contact details
  - Link to social profiles
</IMPORTANT_NOTES>
- [ ] 2.2.5 Extract and optimize all images from existing content
<IMPORTANT_NOTES>
For image migration and optimization:
- Source format: Local images in article directories
- Target structure:
  ```
  public/images/
  └── 2014/
      └── 06/
          ├── hero-images/
          │   └── spam.webp
          └── content-images/
              └── spam-detail.webp
  ```
- Image processing workflow:
  ```typescript
  import sharp from 'sharp';
  
  // For each image:
  // 1. Convert to WebP
  // 2. Generate responsive sizes
  // 3. Optimize quality/size
  // 4. Update Markdown references
  ```
- Optimization settings:
  - Hero images: 1200px max width
  - Content images: 800px max width
  - WebP quality: 80
  - Preserve metadata
  - Generate srcset for responsive images
- Update references in content:
  - Use new path structure
  - Add width/height attributes
  - Include alt text
  - Add loading="lazy"
</IMPORTANT_NOTES>


### 2.3 Image Processing

- [ ] 2.3.1 Implement naming convention: YYYY-MM-DD-article-slug-XX.jpg
<IMPORTANT_NOTES>
For image naming in Astro 5.2+:
- Naming pattern breakdown:
  - YYYY-MM-DD: Article publication date
  - article-slug: Matches article's URL slug
  - XX: Sequential number for multiple images
  - .jpg: Original format (will be converted to .webp)
- Examples:
  ```
  2014-06-27-comment-spam-drupal-01.jpg    # First image
  2014-06-27-comment-spam-drupal-hero.jpg  # Hero image
  2014-06-27-comment-spam-drupal-02.jpg    # Second image
  ```
- Rename script:
  ```typescript
  // src/scripts/rename-images.ts
  import { rename, readdir } from 'fs/promises';
  import { parse } from 'path';
  import { format } from 'date-fns';

  function generateImageName(
    pubDate: Date,
    slug: string,
    index: number,
    isHero: boolean
  ) {
    const date = format(pubDate, 'yyyy-MM-dd');
    const suffix = isHero ? 'hero' : String(index).padStart(2, '0');
    return `${date}-${slug}-${suffix}.jpg`;
  }
  ```
- Benefits:
  - SEO-friendly filenames
  - Clear chronological organization
  - Easy association with articles
  - Supports multiple images per post
</IMPORTANT_NOTES>
- [ ] 2.3.2 Set up responsive image generation using Astro Image component
<IMPORTANT_NOTES>
For responsive images in Astro 5.2+:
- Component setup:
  ```astro
  ---
  // src/components/ResponsiveImage.astro
  import { Image } from 'astro:assets';

  interface Props {
    src: string;
    alt: string;
    sizes: string;
    class?: string;
    loading?: 'lazy' | 'eager';
  }

  const { src, alt, sizes, class: className, loading = 'lazy' } = Astro.props;
  ---

  <Image
    src={src}
    alt={alt}
    widths={[400, 800, 1200]}
    sizes={sizes}
    formats={['webp', 'avif']}
    class={className}
    loading={loading}
  />
  ```
- Usage in articles:
  ```astro
  <ResponsiveImage
    src={frontmatter.heroImage}
    alt={frontmatter.heroCaption}
    sizes="(min-width: 1200px) 1200px, 100vw"
    loading="eager"
  />
  ```
- Size configurations:
  - Hero images: 1200px max
  - Content images: 800px max
  - Thumbnails: 400px max
- Format priorities:
  1. AVIF (best compression)
  2. WebP (wide support)
  3. Original (fallback)
</IMPORTANT_NOTES>
- [ ] 2.3.3 Implement lazy loading for all images
<IMPORTANT_NOTES>
For lazy loading in Astro 5.2+:
- Implementation strategy:
  ```astro
  ---
  // src/components/LazyImage.astro
  import { Image } from 'astro:assets';

  interface Props {
    src: string;
    alt: string;
    class?: string;
  }
  ---

  <div class="lazy-image-wrapper">
    <Image
      src={src}
      alt={alt}
      class:list={['fade-in', className]}
      loading="lazy"
      decoding="async"
    />
  </div>

  <style>
    .lazy-image-wrapper {
      overflow: hidden;
      position: relative;
    }
    .fade-in {
      opacity: 0;
      transition: opacity 0.3s ease-in;
    }
    .fade-in.loaded {
      opacity: 1;
    }
  </style>

  <script>
    // Initialize intersection observer
    const images = document.querySelectorAll('.fade-in');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('loaded');
          observer.unobserve(entry.target);
        }
      });
    });
    images.forEach(img => observer.observe(img));
  </script>
  ```
- Loading priorities:
  - Hero image: `loading="eager"`
  - Above-fold content: `loading="eager"`
  - Below-fold images: `loading="lazy"`
  - Background images: CSS loading
- Performance benefits:
  - Reduced initial page load
  - Lower bandwidth usage
  - Better Core Web Vitals
  - Smooth loading transitions
</IMPORTANT_NOTES>


## 3. Layout and Component Development

### 3.1 Base Layout Components

- [ ] 3.1.1 Create BaseLayout.astro component with HTML structure and metadata
<IMPORTANT_NOTES>
For BaseLayout.astro in Astro 5.2+:
- File structure:
  ```typescript
  // src/layouts/BaseLayout.astro
  ---
  import Header from '../components/Header.astro';
  import Footer from '../components/Footer.astro';
  import SEO from '../components/SEO.astro';

  interface Props {
    title: string;
    description: string;
    image?: string;
    type?: 'website' | 'article';
    next?: string;
    prev?: string;
    canonicalURL?: string;
  }

  const {
    title,
    description,
    image,
    type = 'website',
    next,
    prev,
    canonicalURL = Astro.url
  } = Astro.props;
  ---

  <!DOCTYPE html>
  <html lang="en" class="scroll-smooth">
    <head>
      <SEO
        title={title}
        description={description}
        image={image}
        type={type}
        next={next}
        prev={prev}
        canonicalURL={canonicalURL}
      />
      <slot name="head" />
    </head>
    <body class="min-h-screen bg-white dark:bg-gray-900">
      <Header />
      <main id="main-content" class="mx-auto max-w-screen-xl px-4 py-8">
        <slot />
      </main>
      <Footer />
    </body>
  </html>
  ```
- Key features:
  - TypeScript interface for props
  - Named slots for head content
  - Default slot for main content
  - Dark mode support
  - Responsive container
  - Skip-to-content target
</IMPORTANT_NOTES>
- [ ] 3.1.2 Implement Header.astro component with site title, navigation, and dark mode toggle
<IMPORTANT_NOTES>
For Header.astro in Astro 5.2+:
- Component structure:
  ```typescript
  // src/components/Header.astro
  ---
  import DarkModeToggle from './DarkModeToggle.astro';
  import Navigation from './Navigation.astro';
  import { Image } from 'astro:assets';
  import logo from '../assets/logo.svg';

  const navItems = [
    { text: 'Home', href: '/' },
    { text: 'Blog', href: '/blog' },
    { text: 'About', href: '/about' }
  ];
  ---

  <header class="sticky top-0 z-40 w-full bg-white dark:bg-gray-900">
    <div class="mx-auto flex h-16 max-w-screen-xl items-center justify-between px-4">
      <a href="/" class="flex items-center space-x-2">
        <Image src={logo} alt="Cleaver Barnes" width={32} height={32} />
        <span class="text-xl font-bold">Cleaver Barnes</span>
      </a>
      <div class="flex items-center space-x-4">
        <Navigation items={navItems} />
        <DarkModeToggle />
      </div>
    </div>
  </header>
  ```
- Features:
  - Sticky positioning
  - Responsive layout
  - Dark mode support
  - Mobile-friendly navigation
  - Optimized logo image
</IMPORTANT_NOTES>
- [ ] 3.1.3 Develop Footer.astro component with copyright, RSS, and sitemap links
<IMPORTANT_NOTES>
For Footer.astro in Astro 5.2+:
- Component structure:
  ```typescript
  // src/components/Footer.astro
  ---
  const currentYear = new Date().getFullYear();
  const links = [
    { text: 'RSS', href: '/rss.xml' },
    { text: 'Sitemap', href: '/sitemap-index.xml' },
    { text: 'Privacy', href: '/privacy' }
  ];
  ---

  <footer class="mt-auto w-full bg-gray-100 dark:bg-gray-800">
    <div class="mx-auto max-w-screen-xl px-4 py-8">
      <div class="flex flex-col items-center justify-between space-y-4 md:flex-row md:space-y-0">
        <p class="text-sm text-gray-600 dark:text-gray-400">
          © {currentYear} Cleaver Barnes. All rights reserved.
        </p>
        <nav>
          <ul class="flex space-x-4">
            {links.map(({ text, href }) => (
              <li>
                <a
                  href={href}
                  class="text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
                >
                  {text}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      </div>
    </div>
  </footer>
  ```
- Features:
  - Dynamic copyright year
  - RSS and sitemap links
  - Responsive layout
  - Dark mode support
  - Semantic HTML structure
</IMPORTANT_NOTES>
- [ ] 3.1.4 Create SEO.astro component for consistent metadata across pages
<IMPORTANT_NOTES>
For SEO.astro in Astro 5.2+:
- Component structure:
  ```typescript
  // src/components/SEO.astro
  ---
  interface Props {
    title: string;
    description: string;
    image?: string;
    type?: 'website' | 'article';
    next?: string;
    prev?: string;
    canonicalURL?: string;
  }

  const {
    title,
    description,
    image,
    type = 'website',
    next,
    prev,
    canonicalURL = Astro.url
  } = Astro.props;

  const siteURL = import.meta.env.SITE;
  const ogImage = image ? new URL(image, siteURL) : new URL('/og-default.png', siteURL);
  ---

  <!-- Global Metadata -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="generator" content={Astro.generator} />

  <!-- Primary Meta Tags -->
  <title>{title}</title>
  <meta name="title" content={title} />
  <meta name="description" content={description} />
  <link rel="canonical" href={canonicalURL} />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content={type} />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={ogImage} />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={canonicalURL} />
  <meta property="twitter:title" content={title} />
  <meta property="twitter:description" content={description} />
  <meta property="twitter:image" content={ogImage} />

  <!-- Navigation -->
  {next && <link rel="next" href={next}>}
  {prev && <link rel="prev" href={prev}>}

  <!-- Sitemap -->
  <link rel="sitemap" href="/sitemap-index.xml" />
  ```
- Features:
  - Complete meta tags
  - Open Graph support
  - Twitter Cards
  - Canonical URLs
  - Navigation links
  - Sitemap discovery
  - Dynamic image handling
</IMPORTANT_NOTES>
- [ ] 3.1.5 Implement skip-to-content link for accessibility
<IMPORTANT_NOTES>
For skip-to-content in Astro 5.2+:
- Implementation:
  ```typescript
  // src/components/SkipToContent.astro
  ---
  ---

  <a
    href="#main-content"
    class="absolute -top-full left-4 z-50 rounded bg-white px-4 py-2 text-black transition-transform focus:top-4"
  >
    Skip to content
  </a>

  <style>
    a:focus {
      transform: translateY(var(--top-spacing, 2rem));
    }
  </style>
  ```
- Usage in BaseLayout:
  ```typescript
  import SkipToContent from '../components/SkipToContent.astro';
  
  // Add inside body, before header
  <SkipToContent />
  ```
- Features:
  - Hidden by default
  - Visible on focus
  - High contrast colors
  - Keyboard accessible
  - Smooth transition
  - WCAG compliant
- Best practices:
  - Place as first focusable element
  - Use descriptive link text
  - Ensure target exists
  - Test with screen readers
  - Maintain visible focus state
</IMPORTANT_NOTES>


### 3.2 Blog Components

- [ ] 3.2.1 Create BlogPostPreview.astro for article listings on homepage
- [ ] 3.2.2 Develop BlogPost.astro for full article display
- [ ] 3.2.3 Implement Pagination.astro component with previous/next buttons
- [ ] 3.2.4 Create TagList.astro component for displaying article tags
- [ ] 3.2.5 Develop RelatedPosts.astro component for showing related articles


### 3.3 Utility Components

- [ ] 3.3.1 Implement DarkModeToggle.astro with sun/moon icons
- [ ] 3.3.2 Create FormattedDate.astro for consistent date formatting
- [ ] 3.3.3 Develop ReadingTime.astro to calculate and display estimated reading time
- [ ] 3.3.4 Implement ImageWithCaption.astro for figures with captions
- [ ] 3.3.5 Create CodeBlock.astro for syntax-highlighted code snippets


## 4. Page Templates

### 4.1 Homepage

- [ ] 4.1.1 Create index.astro with paginated article list
- [ ] 4.1.2 Implement pagination logic using Astro's getStaticPaths
- [ ] 4.1.3 Set up article sorting by publication date (newest first)
- [ ] 4.1.4 Configure display of 5 articles per page
- [ ] 4.1.5 Implement excerpt generation using <!-- more --> divider


### 4.2 Article Pages

- [ ] 4.2.1 Create [slug].astro dynamic route for article pages
- [ ] 4.2.2 Implement article metadata display (title, date, author, tags)
- [ ] 4.2.3 Set up featured image display with proper responsive sizing
- [ ] 4.2.4 Add previous/next article navigation
- [ ] 4.2.5 Implement related articles section based on shared tags


### 4.3 About Page

- [ ] 4.3.1 Create about.astro page
- [ ] 4.3.2 Implement profile information section
- [ ] 4.3.3 Add professional background content
- [ ] 4.3.4 Set up contact information with email spam protection
- [ ] 4.3.5 Add links to professional profiles if applicable


### 4.4 Tag Pages

- [ ] 4.4.1 Create tags/[tag].astro dynamic route for tag pages
- [ ] 4.4.2 Implement pagination for articles with specific tags
- [ ] 4.4.3 Create tags/index.astro to list all available tags
- [ ] 4.4.4 Add tag count display showing number of articles per tag
- [ ] 4.4.5 Implement sorting of tags by popularity or alphabetically


## 5. Styling and Design

### 5.1 Tailwind Configuration

- [ ] 5.1.1 Set up custom color palette for light and dark modes
- [ ] 5.1.2 Configure typography settings for body text and headings
- [ ] 5.1.3 Set up responsive breakpoints (mobile, tablet, desktop)
- [ ] 5.1.4 Configure dark mode variant using 'class' strategy
- [ ] 5.1.5 Set up PurgeCSS to remove unused styles


### 5.2 Base Styling

- [ ] 5.2.1 Implement system font stack for body text and headings
- [ ] 5.2.2 Set up monospace font stack for code blocks
- [ ] 5.2.3 Configure base font size (16px) and line heights
- [ ] 5.2.4 Implement fluid typography scaling based on viewport
- [ ] 5.2.5 Set up global styles for links, buttons, and form elements


### 5.3 Component Styling

- [ ] 5.3.1 Style header with responsive navigation
- [ ] 5.3.2 Implement footer styling with proper spacing
- [ ] 5.3.3 Style article previews with consistent layout
- [ ] 5.3.4 Design pagination controls with clear visual feedback
- [ ] 5.3.5 Style dark mode toggle with smooth transitions


### 5.4 Responsive Design

- [ ] 5.4.1 Implement mobile-first layout approach
- [ ] 5.4.2 Create responsive grid layout for article listings
- [ ] 5.4.3 Design collapsible navigation for mobile devices
- [ ] 5.4.4 Ensure proper spacing and typography on all screen sizes
- [ ] 5.4.5 Test and optimize for all breakpoints (mobile, tablet, desktop)


## 6. Functionality Implementation

### 6.1 Dark Mode

- [ ] 6.1.1 Implement dark mode toggle component
- [ ] 6.1.2 Add system preference detection using prefers-color-scheme
- [ ] 6.1.3 Set up localStorage for persisting user preference
- [ ] 6.1.4 Implement flash prevention on initial page load
- [ ] 6.1.5 Add smooth transition between light and dark modes


### 6.2 RSS Feed

- [ ] 6.2.1 Create rss.xml.js file using @astrojs/rss
- [ ] 6.2.2 Configure feed title, description, and site URL
- [ ] 6.2.3 Set up article mapping to feed items
- [ ] 6.2.4 Include publication date, title, description, and link
- [ ] 6.2.5 Add RSS link to site header or footer


### 6.3 Sitemap

- [ ] 6.3.1 Configure @astrojs/sitemap integration
- [ ] 6.3.2 Set site URL in astro.config.mjs
- [ ] 6.3.3 Configure changefreq and priority settings
- [ ] 6.3.4 Create robots.txt file with sitemap reference
- [ ] 6.3.5 Add sitemap link to HTML head


### 6.4 Related Articles

- [ ] 6.4.1 Implement algorithm to find articles with shared tags
- [ ] 6.4.2 Sort related articles by number of matching tags
- [ ] 6.4.3 Limit display to 3 related articles per page
- [ ] 6.4.4 Show title, date, and brief excerpt for each related article
- [ ] 6.4.5 Add "Read more" links to full articles


## 7. SEO and Performance

### 7.1 SEO Implementation

- [ ] 7.1.1 Create reusable SEO component with all required meta tags
- [ ] 7.1.2 Implement Open Graph tags for social sharing
- [ ] 7.1.3 Add Twitter Card metadata
- [ ] 7.1.4 Set up canonical URLs for all pages
- [ ] 7.1.5 Implement JSON-LD structured data for articles and breadcrumbs


### 7.2 Performance Optimization

- [ ] 7.2.1 Configure image optimization with appropriate sizes and formats
- [ ] 7.2.2 Implement font loading strategy to prevent layout shifts
- [ ] 7.2.3 Set up preloading for critical resources
- [ ] 7.2.4 Optimize CSS delivery with critical CSS
- [ ] 7.2.5 Verify zero JavaScript by default (except dark mode toggle)


### 7.3 Accessibility Implementation

- [ ] 7.3.1 Ensure proper heading hierarchy throughout the site
- [ ] 7.3.2 Implement keyboard navigation with visible focus indicators
- [ ] 7.3.3 Add skip-to-content link at the top of each page
- [ ] 7.3.4 Ensure sufficient color contrast (minimum 4.5:1)
- [ ] 7.3.5 Add ARIA attributes where necessary


## 8. Deployment and Testing

### 8.1 Local Testing

- [ ] 8.1.1 Set up automated testing for build process
- [ ] 8.1.2 Implement pre-commit hooks for linting and formatting
- [ ] 8.1.3 Create test scripts for critical functionality
- [ ] 8.1.4 Test site on multiple browsers and devices
- [ ] 8.1.5 Verify all pages pass Lighthouse audits


### 8.2 Cloudflare Pages Setup

- [ ] 8.2.1 Create Cloudflare Pages project
- [ ] 8.2.2 Connect GitHub repository to Cloudflare Pages
- [ ] 8.2.3 Configure build settings (build command, output directory)
- [ ] 8.2.4 Set up custom domain (cleaver.ca)
- [ ] 8.2.5 Configure HTTPS and other security settings


### 8.3 Continuous Integration

- [ ] 8.3.1 Set up GitHub Actions workflow
- [ ] 8.3.2 Configure automated tests on pull requests
- [ ] 8.3.3 Implement Lighthouse CI for performance monitoring
- [ ] 8.3.4 Set up UptimeRobot for monitoring
- [ ] 8.3.5 Configure error tracking for console errors


### 8.4 Post-Deployment

- [ ] 8.4.1 Submit sitemap to Google Search Console
- [ ] 8.4.2 Verify all pages are indexed correctly
- [ ] 8.4.3 Test site performance in real-world conditions
- [ ] 8.4.4 Set up Cloudflare Analytics
- [ ] 8.4.5 Create documentation for future maintenance

