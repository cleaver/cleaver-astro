---
import { Code } from 'astro:components';

type Props = {
  code: string;
  lang: any;
  title?: string;
};

const { code, lang = 'plaintext', title } = Astro.props;
---

<div class="relative my-8 overflow-hidden rounded-lg bg-gray-900 dark:bg-gray-800">
  {
    title && (
      <div class="border-b border-gray-700 bg-gray-800 px-4 py-2 text-sm text-gray-200 dark:bg-gray-700">
        {title}
      </div>
    )
  }
  <div class="overflow-x-auto">
    <Code code={code} lang={lang} theme="github-dark" wrap={false} />
  </div>
</div>

<style>
  :global(pre) {
    padding: 1rem !important;
    margin: 0 !important;
    background-color: transparent !important;
  }

  :global(pre code) {
    counter-reset: step;
    counter-increment: step 0;
    font-family:
      'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  }

  :global(pre code .line) {
    display: inline-block;
    width: 100%;
    padding-left: 1rem;
  }
</style>
